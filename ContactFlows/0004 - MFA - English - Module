{"Version":"2019-10-30","StartAction":"0a7a16e7-2a05-4caf-be2c-a020989d105d","Metadata":{"entryPointPosition":{"x":40,"y":40},"ActionMetadata":{"dea5466d-f7dd-4e7a-8321-76ee75e26f27":{"position":{"x":854.4,"y":72},"conditionMetadata":[],"countryCodePrefix":"+1"},"479b8481-6c0f-4e41-9e54-d323b2c69126":{"position":{"x":1100.8,"y":77.6},"parameters":{"LambdaFunctionARN":{"displayName":"multi-factor-authentication"}},"dynamicMetadata":{"action":false}},"659b741b-8981-4a45-b25c-e6a8718f53f3":{"position":{"x":604,"y":560.8}},"8c4cbc0a-dbc5-4880-8749-cc6896e30bfb":{"position":{"x":593.6,"y":332.8}},"0a7a16e7-2a05-4caf-be2c-a020989d105d":{"position":{"x":240,"y":52.8}},"54f11211-c7c5-4101-bfb9-8d542f695c2e":{"position":{"x":587.2,"y":72.8}},"b3a0199a-4f61-417f-9422-cca3d0cd932b":{"position":{"x":1348,"y":77.6},"conditions":[],"conditionMetadata":[{"id":"ea513e32-0e78-4e7f-8c96-d5bdf1160d89","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"$.External.otp_code"}]},"575ab322-70f6-448e-bfb9-7fa283c628df":{"position":{"x":1608.8,"y":318.4}},"d9fb2e9e-7cf6-4088-823e-42df002a9ffc":{"position":{"x":2139.2,"y":158.4}},"0badad0f-1e34-4a49-9e2f-ef78f29c05aa":{"position":{"x":1602.4,"y":34.4}},"6ddcde63-d7d6-41ea-9135-9ac4e953a5dc":{"position":{"x":1847.2,"y":96.8}}},"Annotations":[],"name":"0004 - MFA - English - Module","description":"","type":"contactFlow","status":"PUBLISHED","hash":{}},"Actions":[{"Parameters":{"StoreInput":"True","InputTimeLimitSeconds":"5","Text":"'","DTMFConfiguration":{"DisableCancelKey":"False"},"InputValidation":{"CustomValidation":{"MaximumLength":"4"}}},"Identifier":"dea5466d-f7dd-4e7a-8321-76ee75e26f27","Type":"GetParticipantInput","Transitions":{"NextAction":"479b8481-6c0f-4e41-9e54-d323b2c69126","Errors":[{"NextAction":"479b8481-6c0f-4e41-9e54-d323b2c69126","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:ap-southeast-1:471112788437:function:multi-factor-authentication","InvocationTimeLimitSeconds":"3","LambdaInvocationAttributes":{"action":"GetOTP"},"ResponseValidation":{"ResponseType":"JSON"}},"Identifier":"479b8481-6c0f-4e41-9e54-d323b2c69126","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"b3a0199a-4f61-417f-9422-cca3d0cd932b","Errors":[{"NextAction":"b3a0199a-4f61-417f-9422-cca3d0cd932b","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"659b741b-8981-4a45-b25c-e6a8718f53f3","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"Text":"You have exceeded the number of retry attempts."},"Identifier":"8c4cbc0a-dbc5-4880-8749-cc6896e30bfb","Type":"MessageParticipant","Transitions":{"NextAction":"659b741b-8981-4a45-b25c-e6a8718f53f3","Errors":[{"NextAction":"659b741b-8981-4a45-b25c-e6a8718f53f3","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Thank you. A one-time password has been sent via SMS. Please enter the PIN using your keypad after the beep."},"Identifier":"0a7a16e7-2a05-4caf-be2c-a020989d105d","Type":"MessageParticipant","Transitions":{"NextAction":"54f11211-c7c5-4101-bfb9-8d542f695c2e","Errors":[{"NextAction":"54f11211-c7c5-4101-bfb9-8d542f695c2e","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"3"},"Identifier":"54f11211-c7c5-4101-bfb9-8d542f695c2e","Type":"Loop","Transitions":{"NextAction":"8c4cbc0a-dbc5-4880-8749-cc6896e30bfb","Conditions":[{"NextAction":"dea5466d-f7dd-4e7a-8321-76ee75e26f27","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"8c4cbc0a-dbc5-4880-8749-cc6896e30bfb","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"ComparisonValue":"$.StoredCustomerInput"},"Identifier":"b3a0199a-4f61-417f-9422-cca3d0cd932b","Type":"Compare","Transitions":{"NextAction":"575ab322-70f6-448e-bfb9-7fa283c628df","Conditions":[{"NextAction":"0badad0f-1e34-4a49-9e2f-ef78f29c05aa","Condition":{"Operator":"Equals","Operands":["$.External.otp_code"]}}],"Errors":[{"NextAction":"575ab322-70f6-448e-bfb9-7fa283c628df","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Text":"Sorry, we didn't recognise your input, please try entering the one time pin again"},"Identifier":"575ab322-70f6-448e-bfb9-7fa283c628df","Type":"MessageParticipant","Transitions":{"NextAction":"54f11211-c7c5-4101-bfb9-8d542f695c2e","Errors":[{"NextAction":"54f11211-c7c5-4101-bfb9-8d542f695c2e","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"d9fb2e9e-7cf6-4088-823e-42df002a9ffc","Type":"EndFlowExecution","Transitions":{}},{"Parameters":{"Text":"Thank you, you have successfully been authenticated using voice biometrics and one time pin. Please wait while we reset your password."},"Identifier":"0badad0f-1e34-4a49-9e2f-ef78f29c05aa","Type":"MessageParticipant","Transitions":{"NextAction":"6ddcde63-d7d6-41ea-9135-9ac4e953a5dc","Errors":[{"NextAction":"6ddcde63-d7d6-41ea-9135-9ac4e953a5dc","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Your password has been reset successfully."},"Identifier":"6ddcde63-d7d6-41ea-9135-9ac4e953a5dc","Type":"MessageParticipant","Transitions":{"NextAction":"d9fb2e9e-7cf6-4088-823e-42df002a9ffc","Errors":[{"NextAction":"d9fb2e9e-7cf6-4088-823e-42df002a9ffc","ErrorType":"NoMatchingError"}]}}]}