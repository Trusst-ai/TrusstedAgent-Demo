{"Version":"2019-10-30","StartAction":"77720b45-55f7-42a4-8c2d-745d83b7fbfe","Metadata":{"entryPointPosition":{"x":40,"y":40},"ActionMetadata":{"260a99fa-4695-4b2e-a6e2-413fe8e2f519":{"position":{"x":261.6,"y":149.6},"children":["8c5d25d4-14ee-4270-970e-a00913b3d0f8"],"overrideConsoleVoice":true,"fragments":{"SetContactData":"8c5d25d4-14ee-4270-970e-a00913b3d0f8"},"overrideLanguageAttribute":true},"8c5d25d4-14ee-4270-970e-a00913b3d0f8":{"position":{"x":261.6,"y":149.6},"dynamicParams":[]},"77720b45-55f7-42a4-8c2d-745d83b7fbfe":{"position":{"x":50.4,"y":150.4}},"354e8f5d-71f0-4a7c-b523-26bc842b81f2":{"position":{"x":904.8,"y":854.4},"parameters":{"LambdaFunctionARN":{"displayName":"demo-trusstedagent-start-streaming"},"LambdaInvocationAttributes":{"kvsStreamArn":{"useDynamic":true},"kvsStartFragment":{"useDynamic":true}}},"dynamicMetadata":{"kvsStreamArn":true,"kvsStartFragment":true}},"7eef7349-24af-4829-9799-bf259d21ba98":{"position":{"x":1312,"y":857.6}},"26e540fc-62bf-4da2-9595-76b60878b28b":{"position":{"x":1817.6,"y":825.6}},"67f8f914-6702-4dd2-b62c-6d4f94d27df4":{"position":{"x":1339.2,"y":42.4}},"VoiceID Prompt":{"position":{"x":1068,"y":41.6},"isFriendlyName":true},"Reset Password":{"position":{"x":1812.8,"y":12},"isFriendlyName":true},"Password Successfull":{"position":{"x":2069.6,"y":31.2},"isFriendlyName":true},"2b37f14d-1139-4d0a-bfc1-7504a8fddf7d":{"position":{"x":2740.8,"y":141.6}},"bf4e1381-f2a4-4d85-bbdd-e0c9245b7491":{"position":{"x":2148,"y":377.6}},"Set Customer ID":{"position":{"x":567.2,"y":44},"isFriendlyName":true,"dynamicParams":[]},"06c9a07f-7871-4d08-ae14-7497df7eaf4e":{"position":{"x":807.2,"y":-2.4},"children":["a041237c-752e-4bda-8913-81c110341d9d"],"dynamicParams":[]},"a041237c-752e-4bda-8913-81c110341d9d":{"position":{"x":807.2,"y":-2.4},"voiceAuthenticationUseDynamic":false,"voiceAuthenticationResponseTimeUseDynamic":false,"fraudDetectionUseDynamic":false,"fragments":{"SetContactData":"06c9a07f-7871-4d08-ae14-7497df7eaf4e"}},"41399e83-ff8a-4264-a059-dcd3a334105c":{"position":{"x":672.8,"y":244}},"VoiceID":{"position":{"x":1568.8,"y":55.2},"isFriendlyName":true},"Retry":{"position":{"x":1187.2,"y":517.6},"isFriendlyName":true},"700c0b54-ffe3-4d30-80e7-2e80e25429d2":{"position":{"x":1689.6,"y":1505.6}},"fec98635-10b7-4a8e-92d0-7b756cfc08ab":{"position":{"x":1698.4,"y":1701.6}},"e40e7a33-103f-4ccd-a678-5855cb2559fc":{"position":{"x":1703.2,"y":1891.2}},"a8f0995e-05c2-49be-9342-037df01fbe29":{"position":{"x":1695.2,"y":2088.8}},"3487ad46-de16-43fb-a2cf-b5c6aba4133e":{"position":{"x":1415.2,"y":1478.4},"conditions":[{"Condition":{"Operands":[{"displayName":"Option1"}]}},{"Condition":{"Operands":[{"displayName":"Option2"}]}},{"Condition":{"Operands":[{"displayName":"Option3"}]}},{"Condition":{"Operands":[{"displayName":"Option4"}]}}],"conditionMetadata":[{"id":"9f4f22cf-82bf-4422-a0ae-e65160d2f278","percent":{"value":1,"display":"1%"},"name":"Option1","value":"20"},{"id":"acacd59c-7cac-4292-95ff-4cf14949141a","percent":{"value":1,"display":"1%"},"name":"Option2","value":"20"},{"id":"6fe230c9-d002-4d48-a376-293fbd33b552","percent":{"value":1,"display":"1%"},"name":"Option3","value":"20"},{"id":"f0c28a03-9016-4442-99d6-cb7794d9fe5e","percent":{"value":1,"display":"1%"},"name":"Option4","value":"20"}]},"db212851-1e03-40be-ab0e-c852d33ce04e":{"position":{"x":1611.2,"y":1074.4},"parameters":{"LambdaFunctionARN":{"displayName":"demo-trusstedagent-virtual-agent"}},"dynamicMetadata":{}},"1737ac01-4375-47cc-80c0-9c0f0b9d1570":{"position":{"x":1706.4,"y":2300.8}},"560e824a-3501-4288-a8f5-887d25f41639":{"position":{"x":3097.6,"y":517.6}},"783e4809-dd88-40ef-87fb-a3e1b6c62ec9":{"position":{"x":2203.2,"y":586.4}},"Bye":{"position":{"x":2427.2,"y":128},"isFriendlyName":true},"Transfer to Agent":{"position":{"x":1491.2,"y":598.4},"isFriendlyName":true,"parameters":{"QueueId":{"displayName":"BasicQueue"}},"queue":{"text":"BasicQueue"}},"To Agent":{"position":{"x":1826.4,"y":584.8},"isFriendlyName":true},"Play TTS file":{"position":{"x":2836,"y":716},"isFriendlyName":true},"TTS - Prompt":{"position":{"x":2565.6,"y":782.4},"isFriendlyName":true,"parameters":{"LambdaFunctionARN":{"displayName":"demo-trusstedagent-text-to-speech"},"LambdaInvocationAttributes":{"input":{"useJson":true}}},"dynamicMetadata":{"input":false}},"d7b8b0df-68c3-475a-a56c-e6f005894dbf":{"position":{"x":2525.6,"y":972.8},"conditionMetadata":[{"id":"bcabddfd-ec07-4a09-a6c3-219a4c49cf9a","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"true"}]},"e17392c1-e87e-4930-9ee0-57737d393203":{"position":{"x":2516,"y":1340}},"21d42013-e7f5-456a-9fd8-b15a993cf68f":{"position":{"x":1931.2,"y":1036},"conditions":[],"conditionMetadata":[{"id":"f350339a-712c-4452-ae18-0c5304235674","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Done"},{"id":"3239fe7b-b823-4225-9255-b19f25f0dada","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Agent"},{"id":"7c51222d-7403-4f5e-b97e-1d789044a749","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"ThinkingMode"},{"id":"3b39c1ba-05ca-4731-aa55-a33451871ab3","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Sleep"},{"id":"be43d0fa-1526-4249-b136-3deee6da9e6e","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Processing"}]},"b8c31af1-33e8-4d4b-8b8d-fc4abeb00842":{"position":{"x":2844,"y":923.2}},"b8a05722-1a24-4a78-a653-1fb312365b77":{"position":{"x":2277.6,"y":979.2}},"87e7b8e3-e768-4e95-a071-3065cc3b358f":{"position":{"x":2164.8,"y":1407.2}},"4d48f0b3-fcba-473c-99cb-8d91027006d1":{"position":{"x":540,"y":900},"toCustomer":true,"fromCustomer":true},"Respond TTS":{"position":{"x":3595.2,"y":840.8},"isFriendlyName":true,"parameters":{"LambdaFunctionARN":{"displayName":"demo-trusstedagent-text-to-speech"},"LambdaInvocationAttributes":{"input":{"useJson":true}}},"dynamicMetadata":{"input":false}},"Play TTS file Response":{"position":{"x":3998.4,"y":812.8},"isFriendlyName":true}},"Annotations":[],"name":"0002 - Trussted Agent - Malay","description":"","type":"contactFlow","status":"saved","hash":{}},"Actions":[{"Parameters":{"TextToSpeechVoice":"Matthew","TextToSpeechEngine":"Neural","TextToSpeechStyle":"Conversational"},"Identifier":"260a99fa-4695-4b2e-a6e2-413fe8e2f519","Type":"UpdateContactTextToSpeechVoice","Transitions":{"NextAction":"8c5d25d4-14ee-4270-970e-a00913b3d0f8"}},{"Parameters":{"LanguageCode":"en-US"},"Identifier":"8c5d25d4-14ee-4270-970e-a00913b3d0f8","Type":"UpdateContactData","Transitions":{"NextAction":"Set Customer ID","Errors":[{"NextAction":"Set Customer ID","ErrorType":"NoMatchingError"}]}},{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"77720b45-55f7-42a4-8c2d-745d83b7fbfe","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"260a99fa-4695-4b2e-a6e2-413fe8e2f519"}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:ap-southeast-1:471112788437:function:demo-trusstedagent-start-streaming","InvocationTimeLimitSeconds":"7","LambdaInvocationAttributes":{"kvsStreamArn":"$.MediaStreams.Customer.Audio.StreamARN","kvsStartFragment":"$.MediaStreams.Customer.Audio.StartFragmentNumber"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"354e8f5d-71f0-4a7c-b523-26bc842b81f2","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"7eef7349-24af-4829-9799-bf259d21ba98","Errors":[{"NextAction":"7eef7349-24af-4829-9799-bf259d21ba98","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"100"},"Identifier":"7eef7349-24af-4829-9799-bf259d21ba98","Type":"Loop","Transitions":{"NextAction":"26e540fc-62bf-4da2-9595-76b60878b28b","Conditions":[{"NextAction":"db212851-1e03-40be-ab0e-c852d33ce04e","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"26e540fc-62bf-4da2-9595-76b60878b28b","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"Text":"That concludes the test. Thank you, goodbye!"},"Identifier":"26e540fc-62bf-4da2-9595-76b60878b28b","Type":"MessageParticipant","Transitions":{"NextAction":"560e824a-3501-4288-a8f5-887d25f41639","Errors":[{"NextAction":"560e824a-3501-4288-a8f5-887d25f41639","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Media":{"Uri":"s3://alliance-bank-non-polly-prompts/test2.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"67f8f914-6702-4dd2-b62c-6d4f94d27df4","Type":"MessageParticipant","Transitions":{"NextAction":"VoiceID","Errors":[{"NextAction":"VoiceID","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Media":{"Uri":"s3://alliance-bank-non-polly-prompts/prompt_bahasa_1_voiceid.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"VoiceID Prompt","Type":"MessageParticipant","Transitions":{"NextAction":"67f8f914-6702-4dd2-b62c-6d4f94d27df4","Errors":[{"NextAction":"67f8f914-6702-4dd2-b62c-6d4f94d27df4","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Media":{"Uri":"s3://alliance-bank-non-polly-prompts/prompt_bahasa_2_resetting_password.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"Reset Password","Type":"MessageParticipant","Transitions":{"NextAction":"Password Successfull","Errors":[{"NextAction":"Password Successfull","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Media":{"Uri":"s3://alliance-bank-non-polly-prompts/prompt_bahasa_3_anything_else.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"Password Successfull","Type":"MessageParticipant","Transitions":{"NextAction":"4d48f0b3-fcba-473c-99cb-8d91027006d1","Errors":[{"NextAction":"4d48f0b3-fcba-473c-99cb-8d91027006d1","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"2b37f14d-1139-4d0a-bfc1-7504a8fddf7d","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"Media":{"Uri":"s3://alliance-bank-non-polly-prompts/prompt_bahasa_5_error_goodbye.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"bf4e1381-f2a4-4d85-bbdd-e0c9245b7491","Type":"MessageParticipant","Transitions":{"NextAction":"560e824a-3501-4288-a8f5-887d25f41639","Errors":[{"NextAction":"560e824a-3501-4288-a8f5-887d25f41639","ErrorType":"NoMatchingError"}]}},{"Parameters":{"TargetContact":"Current","CustomerId":"12345"},"Identifier":"Set Customer ID","Type":"UpdateContactData","Transitions":{"NextAction":"41399e83-ff8a-4264-a059-dcd3a334105c","Errors":[{"NextAction":"41399e83-ff8a-4264-a059-dcd3a334105c","ErrorType":"NoMatchingError"}]}},{"Parameters":{"IsVoiceIdStreamingEnabled":"true","IsFraudDetectionEnabled":"false","IsVoiceAuthenticationEnabled":"true","VoiceAuthenticationThreshold":"10","VoiceAuthenticationResponseTime":"10"},"Identifier":"06c9a07f-7871-4d08-ae14-7497df7eaf4e","Type":"UpdateContactData","Transitions":{"NextAction":"a041237c-752e-4bda-8913-81c110341d9d","Errors":[{"NextAction":"VoiceID Prompt","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"a041237c-752e-4bda-8913-81c110341d9d","Type":"StartVoiceIdStream","Transitions":{"NextAction":"VoiceID Prompt","Errors":[{"NextAction":"VoiceID Prompt","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Media":{"Uri":"s3://alliance-bank-non-polly-prompts/prompt_bahasa_12_welcome.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"41399e83-ff8a-4264-a059-dcd3a334105c","Type":"MessageParticipant","Transitions":{"NextAction":"06c9a07f-7871-4d08-ae14-7497df7eaf4e","Errors":[{"NextAction":"06c9a07f-7871-4d08-ae14-7497df7eaf4e","ErrorType":"NoMatchingError"}]}},{"Parameters":{"CheckVoiceIdOption":"voiceAuthentication"},"Identifier":"VoiceID","Type":"CheckVoiceId","Transitions":{"NextAction":"Retry","Conditions":[{"NextAction":"Reset Password","Condition":{"Operator":"Equals","Operands":["Authenticated"]}},{"NextAction":"Retry","Condition":{"Operator":"Equals","Operands":["NotAuthenticated"]}},{"NextAction":"67f8f914-6702-4dd2-b62c-6d4f94d27df4","Condition":{"Operator":"Equals","Operands":["Inconclusive"]}},{"NextAction":"Retry","Condition":{"Operator":"Equals","Operands":["NotEnrolled"]}},{"NextAction":"Retry","Condition":{"Operator":"Equals","Operands":["OptedOut"]}}],"Errors":[{"NextAction":"Retry","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Media":{"Uri":"s3://alliance-bank-non-polly-prompts/prompt_bahasa_13_enroll.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"Retry","Type":"MessageParticipant","Transitions":{"NextAction":"Transfer to Agent","Errors":[{"NextAction":"Transfer to Agent","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Media":{"Uri":"s3://alliance-bank-non-polly-prompts/prompt_bahasa_6_roger_that.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"700c0b54-ffe3-4d30-80e7-2e80e25429d2","Type":"MessageParticipant","Transitions":{"NextAction":"db212851-1e03-40be-ab0e-c852d33ce04e","Errors":[{"NextAction":"db212851-1e03-40be-ab0e-c852d33ce04e","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Media":{"Uri":"s3://alliance-bank-non-polly-prompts/prompt_bahasa_7_cool_looking_up.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"fec98635-10b7-4a8e-92d0-7b756cfc08ab","Type":"MessageParticipant","Transitions":{"NextAction":"db212851-1e03-40be-ab0e-c852d33ce04e","Errors":[{"NextAction":"db212851-1e03-40be-ab0e-c852d33ce04e","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Media":{"Uri":"s3://alliance-bank-non-polly-prompts/prompt_bahasa_8_thanks_second.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"e40e7a33-103f-4ccd-a678-5855cb2559fc","Type":"MessageParticipant","Transitions":{"NextAction":"db212851-1e03-40be-ab0e-c852d33ce04e","Errors":[{"NextAction":"db212851-1e03-40be-ab0e-c852d33ce04e","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Media":{"Uri":"s3://alliance-bank-non-polly-prompts/prompt_bahasa_9_best_solution.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"a8f0995e-05c2-49be-9342-037df01fbe29","Type":"MessageParticipant","Transitions":{"NextAction":"db212851-1e03-40be-ab0e-c852d33ce04e","Errors":[{"NextAction":"db212851-1e03-40be-ab0e-c852d33ce04e","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"3487ad46-de16-43fb-a2cf-b5c6aba4133e","Type":"DistributeByPercentage","Transitions":{"NextAction":"1737ac01-4375-47cc-80c0-9c0f0b9d1570","Conditions":[{"NextAction":"700c0b54-ffe3-4d30-80e7-2e80e25429d2","Condition":{"Operator":"NumberLessThan","Operands":["21"]}},{"NextAction":"fec98635-10b7-4a8e-92d0-7b756cfc08ab","Condition":{"Operator":"NumberLessThan","Operands":["41"]}},{"NextAction":"e40e7a33-103f-4ccd-a678-5855cb2559fc","Condition":{"Operator":"NumberLessThan","Operands":["61"]}},{"NextAction":"a8f0995e-05c2-49be-9342-037df01fbe29","Condition":{"Operator":"NumberLessThan","Operands":["81"]}}],"Errors":[{"NextAction":"1737ac01-4375-47cc-80c0-9c0f0b9d1570","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:ap-southeast-1:471112788437:function:demo-trusstedagent-virtual-agent","InvocationTimeLimitSeconds":"7","ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"db212851-1e03-40be-ab0e-c852d33ce04e","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"21d42013-e7f5-456a-9fd8-b15a993cf68f","Errors":[{"NextAction":"bf4e1381-f2a4-4d85-bbdd-e0c9245b7491","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Media":{"Uri":"s3://alliance-bank-non-polly-prompts/prompt_bahasa_10_cool_wont.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"1737ac01-4375-47cc-80c0-9c0f0b9d1570","Type":"MessageParticipant","Transitions":{"NextAction":"db212851-1e03-40be-ab0e-c852d33ce04e","Errors":[{"NextAction":"db212851-1e03-40be-ab0e-c852d33ce04e","ErrorType":"NoMatchingError"}]}},{"Parameters":{"MediaStreamingState":"Disabled","Participants":[{"ParticipantType":"Customer","MediaDirections":["To","From"]}],"MediaStreamType":"Audio"},"Identifier":"560e824a-3501-4288-a8f5-887d25f41639","Type":"UpdateContactMediaStreamingBehavior","Transitions":{"NextAction":"2b37f14d-1139-4d0a-bfc1-7504a8fddf7d","Errors":[{"NextAction":"2b37f14d-1139-4d0a-bfc1-7504a8fddf7d","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"$.External.message"},"Identifier":"783e4809-dd88-40ef-87fb-a3e1b6c62ec9","Type":"MessageParticipant","Transitions":{"NextAction":"560e824a-3501-4288-a8f5-887d25f41639","Errors":[{"NextAction":"560e824a-3501-4288-a8f5-887d25f41639","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Media":{"Uri":"s3://alliance-bank-non-polly-prompts/prompt_bahasa_4_unfortunately_error.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"Bye","Type":"MessageParticipant","Transitions":{"NextAction":"2b37f14d-1139-4d0a-bfc1-7504a8fddf7d","Errors":[{"NextAction":"2b37f14d-1139-4d0a-bfc1-7504a8fddf7d","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueueId":"arn:aws:connect:ap-southeast-1:471112788437:instance/c9349456-ed83-4c7c-a92a-937388d63071/queue/b4ccf709-3e0f-4fe0-8e77-a9f649b509b1"},"Identifier":"Transfer to Agent","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"To Agent","Errors":[{"NextAction":"To Agent","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"To Agent","Type":"TransferContactToQueue","Transitions":{"NextAction":"Bye","Errors":[{"NextAction":"Bye","ErrorType":"QueueAtCapacity"},{"NextAction":"Bye","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Media":{"Uri":"s3://demo-trusstedagent-deployment-471112788437/file.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"Play TTS file","Type":"MessageParticipant","Transitions":{"NextAction":"560e824a-3501-4288-a8f5-887d25f41639","Errors":[{"NextAction":"560e824a-3501-4288-a8f5-887d25f41639","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:ap-southeast-1:471112788437:function:demo-trusstedagent-text-to-speech","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"input":{"URL":"http://ec2-13-212-61-177.ap-southeast-1.compute.amazonaws.com:80/synthesize","Text":"$.External.message"}},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"TTS - Prompt","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"Play TTS file","Errors":[{"NextAction":"Play TTS file","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.FlowAttributes.thinkingMode"},"Identifier":"d7b8b0df-68c3-475a-a56c-e6f005894dbf","Type":"Compare","Transitions":{"NextAction":"","Conditions":[{"NextAction":"b8c31af1-33e8-4d4b-8b8d-fc4abeb00842","Condition":{"Operator":"Equals","Operands":["true"]}}],"Errors":[{"NextAction":"","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"FlowAttributes":{"thinkingMode":{"Value":"true"}}},"Identifier":"e17392c1-e87e-4930-9ee0-57737d393203","Type":"UpdateFlowAttributes","Transitions":{"NextAction":"b8a05722-1a24-4a78-a653-1fb312365b77","Errors":[{"NextAction":"b8a05722-1a24-4a78-a653-1fb312365b77","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.External.action"},"Identifier":"21d42013-e7f5-456a-9fd8-b15a993cf68f","Type":"Compare","Transitions":{"NextAction":"b8a05722-1a24-4a78-a653-1fb312365b77","Conditions":[{"NextAction":"783e4809-dd88-40ef-87fb-a3e1b6c62ec9","Condition":{"Operator":"Equals","Operands":["Done"]}},{"NextAction":"TTS - Prompt","Condition":{"Operator":"Equals","Operands":["Agent"]}},{"NextAction":"87e7b8e3-e768-4e95-a071-3065cc3b358f","Condition":{"Operator":"Equals","Operands":["ThinkingMode"]}},{"NextAction":"7eef7349-24af-4829-9799-bf259d21ba98","Condition":{"Operator":"Equals","Operands":["Sleep"]}},{"NextAction":"3487ad46-de16-43fb-a2cf-b5c6aba4133e","Condition":{"Operator":"Equals","Operands":["Processing"]}}],"Errors":[{"NextAction":"b8a05722-1a24-4a78-a653-1fb312365b77","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Text":"The current tool is: $.External.action\n,,\nI had a thought: $.External.thought"},"Identifier":"b8c31af1-33e8-4d4b-8b8d-fc4abeb00842","Type":"MessageParticipant","Transitions":{"NextAction":"Respond TTS","Errors":[{"NextAction":"Respond TTS","ErrorType":"NoMatchingError"}]}},{"Parameters":{"MediaStreamingState":"Disabled","Participants":[{"ParticipantType":"Customer","MediaDirections":["To","From"]}],"MediaStreamType":"Audio"},"Identifier":"b8a05722-1a24-4a78-a653-1fb312365b77","Type":"UpdateContactMediaStreamingBehavior","Transitions":{"NextAction":"d7b8b0df-68c3-475a-a56c-e6f005894dbf","Errors":[{"NextAction":"Respond TTS","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Media":{"Uri":"s3://alliance-bank-non-polly-prompts/prompt_bahasa_11_enable_thinking.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"87e7b8e3-e768-4e95-a071-3065cc3b358f","Type":"MessageParticipant","Transitions":{"NextAction":"e17392c1-e87e-4930-9ee0-57737d393203","Errors":[{"NextAction":"Respond TTS","ErrorType":"NoMatchingError"}]}},{"Parameters":{"MediaStreamingState":"Enabled","MediaStreamType":"Audio","Participants":[{"ParticipantType":"Customer","MediaDirections":["To","From"]}]},"Identifier":"4d48f0b3-fcba-473c-99cb-8d91027006d1","Type":"UpdateContactMediaStreamingBehavior","Transitions":{"NextAction":"354e8f5d-71f0-4a7c-b523-26bc842b81f2","Errors":[{"NextAction":"354e8f5d-71f0-4a7c-b523-26bc842b81f2","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:ap-southeast-1:471112788437:function:demo-trusstedagent-text-to-speech","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"input":{"URL":"http://ec2-13-212-61-177.ap-southeast-1.compute.amazonaws.com:80/synthesize","Text":"$.External.message"}},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"Respond TTS","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"Play TTS file Response","Errors":[{"NextAction":"Play TTS file Response","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Media":{"Uri":"s3://demo-trusstedagent-deployment-471112788437/file.wav","SourceType":"S3","MediaType":"Audio"}},"Identifier":"Play TTS file Response","Type":"MessageParticipant","Transitions":{"NextAction":"4d48f0b3-fcba-473c-99cb-8d91027006d1","Errors":[{"NextAction":"4d48f0b3-fcba-473c-99cb-8d91027006d1","ErrorType":"NoMatchingError"}]}}]}